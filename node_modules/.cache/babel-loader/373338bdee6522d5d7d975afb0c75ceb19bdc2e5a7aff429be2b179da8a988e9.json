{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import DetailedConcertCard from'./DetailedConcertCard';import mockReviews from'../data/mock_reviews.json';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const Infopage=props=>{const{concertTitle}=useParams();const concert=props.concertData.find(event=>decodeURIComponent(event.event_title)===decodeURIComponent(concertTitle));const[initialReviews,setInitialReviews]=useState([]);const[displayReviews,setDisplayReviews]=useState([]);const[sortOption,setSortOption]=useState('date');useEffect(()=>{const selectRandomReviews=()=>{let shuffled=[...mockReviews].sort(()=>0.5-Math.random());return shuffled.slice(0,5);};if(!initialReviews.length||concertTitle!==(concert===null||concert===void 0?void 0:concert.event_title)){const randomReviews=selectRandomReviews();setInitialReviews(randomReviews);setDisplayReviews(randomReviews);}},[concertTitle,concert===null||concert===void 0?void 0:concert.event_title]);useEffect(()=>{const sortedReviews=[...initialReviews].sort((a,b)=>{if(sortOption==='rating'){return b.rating-a.rating||new Date(a.date)-new Date(b.date);}else{return new Date(a.date)-new Date(b.date);}});setDisplayReviews(sortedReviews);},[sortOption,initialReviews]);const renderStars=rating=>\"★\".repeat(rating)+\"☆\".repeat(5-rating);const reviewElements=displayReviews.map(review=>/*#__PURE__*/_jsx(\"div\",{className:\"review-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"review-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-author\",children:[review.username,\" on \",review.author,\" \",review.date,\" \",renderStars(review.rating)]}),/*#__PURE__*/_jsx(\"div\",{className:\"review-text\",children:review.text})]})},review.id));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(DetailedConcertCard,{concert:concert})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort-opt\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sort\",children:\"Sort reviews by:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"sort\",value:sortOption,onChange:e=>setSortOption(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"Rating\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviews-layout\",children:reviewElements})]})]});};export default Infopage;","map":{"version":3,"names":["React","useEffect","useState","useParams","DetailedConcertCard","mockReviews","jsxs","_jsxs","jsx","_jsx","Infopage","props","concertTitle","concert","concertData","find","event","decodeURIComponent","event_title","initialReviews","setInitialReviews","displayReviews","setDisplayReviews","sortOption","setSortOption","selectRandomReviews","shuffled","sort","Math","random","slice","length","randomReviews","sortedReviews","a","b","rating","Date","date","renderStars","repeat","reviewElements","map","review","className","children","username","author","text","id","htmlFor","value","onChange","e","target"],"sources":["/Users/junheepark/Documents/info340-code/04-concerto/src/components/Infopage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailedConcertCard from './DetailedConcertCard';\nimport mockReviews from '../data/mock_reviews.json';\n\nconst Infopage = (props) => {\n    const { concertTitle } = useParams();\n    const concert = props.concertData.find(event => decodeURIComponent(event.event_title) === decodeURIComponent(concertTitle));\n    const [initialReviews, setInitialReviews] = useState([]);\n    const [displayReviews, setDisplayReviews] = useState([]);\n    const [sortOption, setSortOption] = useState('date');\n\n    useEffect(() => {\n        const selectRandomReviews = () => {\n            let shuffled = [...mockReviews].sort(() => 0.5 - Math.random());\n            return shuffled.slice(0, 5);\n        };\n\n        if (!initialReviews.length || concertTitle !== concert?.event_title) {\n            const randomReviews = selectRandomReviews();\n            setInitialReviews(randomReviews);\n            setDisplayReviews(randomReviews);\n        }\n    }, [concertTitle, concert?.event_title]);\n\n    useEffect(() => {\n        const sortedReviews = [...initialReviews].sort((a, b) => {\n            if (sortOption === 'rating') {\n                return b.rating - a.rating || new Date(a.date) - new Date(b.date);\n            } else {\n                return new Date(a.date) - new Date(b.date);\n            }\n        });\n\n        setDisplayReviews(sortedReviews);\n    }, [sortOption, initialReviews]);\n\n    const renderStars = (rating) => \"★\".repeat(rating) + \"☆\".repeat(5 - rating);\n\n    const reviewElements = displayReviews.map((review) => (\n        <div className=\"review-card\" key={review.id}>\n            <div className=\"review-content\">\n                <div className=\"review-author\">\n                    {review.username} on {review.author} {review.date} {renderStars(review.rating)}\n                </div>\n                <div className=\"review-text\">{review.text}</div>\n            </div>\n        </div>\n    ));\n\n    return (\n        <div>\n            <header>\n                <DetailedConcertCard concert={concert} />\n            </header>\n            <main>\n                <div className=\"sort-opt\">\n                    <label htmlFor=\"sort\">Sort reviews by:</label>\n                    <select id=\"sort\" value={sortOption} onChange={(e) => setSortOption(e.target.value)}>\n                        <option value=\"date\">Date</option>\n                        <option value=\"rating\">Rating</option>\n                    </select>\n                </div>\n                <div className=\"reviews-layout\">\n                    {reviewElements}\n                </div>\n            </main>\n        </div>\n    );\n};\n\nexport default Infopage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}